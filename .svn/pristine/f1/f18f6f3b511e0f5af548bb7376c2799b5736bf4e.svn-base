<template>
    <div class="ticket">
        <van-tabs v-model="active" title-active-color="#00b616" line-height="2px" color="#00b616" line-width="1.8rem">
            <van-tab title="未使用">
                <div class="list">
                    <div class="item" v-for="item in unusedList" :key="item.c_code">
                        <img src="../../assets/img/tick.png" alt="">
                        <div class="end">结束时间：{{item.c_end}}</div>
                    </div>
                </div>
            </van-tab>
            <van-tab title="已使用">
                <div class="list">
                    <div class="item" v-for="item in usedList" :key="item.c_code">
                        <img src="../../assets/img/tick_ccc.png" alt="">
                        <div class="end">结束时间：{{item.c_end}}</div>
                    </div>
                </div>
            </van-tab>
            <van-tab title="已过期">
                <div class="list">
                    <div class="item" v-for="item in timedList" :key="item.c_code">
                        <img src="../../assets/img/tick_ccc.png" alt="">
                        <div class="end">结束时间：{{item.c_end}}</div>
                    </div>
                </div>
            </van-tab>
        </van-tabs>
        <div class="more">没有更多了</div>
    </div>
</template>

<script>
import { Tab, Tabs } from 'vant';
export default {
    components: {   
        [Tab.name]: Tab,
        [Tabs.name]: Tabs
    },
    data() {
        return{
            active: 0,
            unusedList: [],
            usedList: [],
            timedList: [],
            parms: {
                xrymem_token_id: localStorage.memToken,
                opType: 303,
            }
        }
    },
    methods: {
        getList() {
            this.$api.ticket.merTicket(this.parms).then(res => {
                if(res.resultCode == 1) {
                    let list = res.data
                    if(list.length != 0) {
                        this.unusedList = list.filter(ele => {
                            return ele.c_status == 0
                        })
                        this.usedList = list.filter(ele => {
                            return ele.c_status == 2
                        })
                        this.timedList = list.filter(ele => {
                            return ele.c_status == 3
                        })
                    }
                    
                }
            })
        }
    },
    mounted() {
        this.getList()
    }
}
</script>

<style lang="less" scoped>
@s: 0.0133rem;
.ticket{
    padding-bottom: 20*@s;
    .list{
        .item{
            margin: 20*@s 30*@s 0;
            position: relative;
            img{
                width: 100%
            }
            .end{
                position: absolute;
                bottom: 12*@s;
                left: 250*@s;
                font-size: 24*@s;
                color: #666666;
            }
        }
        
    }
    .more{
        text-align: center;
        color: #666;
        margin-top: 30*@s;
    }
}
</style>
