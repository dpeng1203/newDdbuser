(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a60e8ee"],{"0149":function(e,t,n){},"0c72":function(e,t,n){"use strict";var o=n("a90b"),i=n.n(o);i.a},"128d":function(e,t,n){e.exports=n.p+"ddbxryuser/img/login_logo.png"},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(e,t,n){"use strict";n("3846");var o=n("cb7c"),i=n("0bfb"),a=n("9e1e"),s="toString",r=/./[s],c=function(e){n("2aba")(RegExp.prototype,s,e,!0)};n("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var e=o(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)}):r.name!=s&&c(function(){return r.call(this)})},"7f7f":function(e,t,n){var o=n("86cc").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in i||n("9e1e")&&o(i,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},a90b:function(e,t,n){},bc10:function(e,t,n){"use strict";var o=n("0149"),i=n.n(o);i.a},dc3f:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("img",{attrs:{src:n("128d"),alt:""}}),o("div",{staticClass:"box"},[o("div",{staticClass:"tab"},[o("span",{class:{active:1==e.active},on:{click:function(t){e.active=1}}},[e._v("登录")]),o("span",{class:{active:2==e.active},on:{click:function(t){e.active=2}}},[e._v("注册")])]),1==e.active?o("div",{staticClass:"login-cont"},[o("div",{staticClass:"item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),o("div",{staticClass:"item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),o("p",{on:{click:function(t){return e.$router.push("/resetPw")}}},[o("span",[e._v("忘记密码")])]),o("div",{staticClass:"btn",on:{click:e.login}},[e._v("立即登陆")])]):e._e(),2==e.active?o("div",{staticClass:"login-cont"},[o("sign",{attrs:{recCode:e.recCode},on:{memLogin:e.signed}})],1):e._e()])])},i=[],a=(n("e7e5"),n("d399")),s=n("ed08"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sign"},[n("div",{staticClass:"login-cont"},[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"用户名：4-14字符"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码：6-20字符"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"number",pattern:"[0-9]*",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"number",pattern:"[0-9]*",placeholder:"输入验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.timeObj.canGet,expression:"!timeObj.canGet"}]},[e._v(e._s(e.timeObj.waitTime+"s后重新获取"))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.timeObj.canGet,expression:"timeObj.canGet"}],staticClass:"code",on:{click:e.getCode}},[e._v("获取验证码")])]),n("div",{staticClass:"btn",on:{click:e.toSign}},[e._v("立即注册")])])])},c=[],u=(n("7f7f"),n("c5f6"),{name:"sign",props:{recCode:[Number,String]},data:function(){return{name:"",password:"",phone:"",code:"",timeCountObj:{canGet:!0,timer:null,waitTime:60}}},computed:{timeObj:function(){return this.timeCountObj.canGet?this.timeCountObj:Object(s["e"])(this.timeCountObj)}},methods:{getCode:function(){var e=this;if(Object(s["c"])(this.phone)){var t={mobile:this.phone,type:"register"};this.$api.login.code(t).then(function(t){1===t.resultCode&&(Object(a["a"])("发送成功！"),Object(s["e"])(e.timeObj))})}},toSign:function(){var e=this;if(Object(s["d"])(this.name)&&Object(s["b"])(this.password)&&Object(s["c"])(this.phone))if(this.recCode){var t={memName:this.name,memMobile:this.phone,verifyCode:this.code,memPwd:this.password,pMemCode:this.recCode};this.$api.login.signQr(t).then(function(t){1===t.resultCode&&(Object(a["a"])("注册成功！"),e.$emit("memLogin",1))})}else{var n={memName:this.name,memMobile:this.phone,verifyCode:this.code,memPwd:this.password};this.$api.login.sign(n).then(function(t){1===t.resultCode&&(Object(a["a"])("注册成功！"),e.$emit("memLogin",1))})}}}}),m=u,l=(n("0c72"),n("2877")),d=Object(l["a"])(m,r,c,!1,null,"b0a2831c",null),p=d.exports,v={name:"login",components:{sign:p},data:function(){return{active:1,phone:"",password:"",recCode:""}},methods:{login:function(){var e=this;if(Object(s["c"])(this.phone)&&Object(s["b"])(this.password)){var t={mobile:this.phone,pwd:this.password};this.$api.login.login(t).then(function(t){1===t.resultCode&&(localStorage.memToken=t.data.token,localStorage.phone=e.phone,localStorage.memName=t.data.member.memName,localStorage.memId=t.data.member.memCode,e.$router.push("/home"))})}},signed:function(){this.active=1}},mounted:function(){console.log(this.$route.query.memCode),localStorage.memToken&&this.$route.query.memCode&&(Object(a["a"])("已注册用户,自动登录!"),this.$router.push("/home")),this.$route.query.memCode&&!localStorage.memToken&&(this.active=2,this.recCode=this.$route.query.memCode),localStorage.memToken&&this.$router.push("/home")}},h=v,f=(n("bc10"),Object(l["a"])(h,o,i,!1,null,"3e212bf4",null));t["default"]=f.exports},ed08:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return c});n("6b54"),n("e7e5");var o=n("d399"),i=function(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;return!!t.test(e)||(Object(o["a"])("请输入正确的手机号"),!1)},a=function(e){var t=/^[\u4E00-\u9FA5A-Za-z0-9_]{1,16}$/;return!!t.test(e)||(Object(o["a"])("输入的必须是1-16位的任何字符!!!"),!1)},s=function(e){var t=/^[a-zA-Z0-9_-]{6,20}$/;return!!t.test(e)||(Object(o["a"])("密码必须由6-20位字母、数字、下划线组成"),!1)},r=function(e){var t=/^\d{6}$/;return!!t.test(e)||(Object(o["a"])("请输入六位数字的密码！"),!1)},c=function(e){var t=60;return e.timer||(e.waitTime=t,e.canGet=!1,e.timer=setInterval(function(){e.waitTime>0&&e.waitTime<=t?e.waitTime--:(e.canGet=!0,clearInterval(e.timer),e.timer=null)},1e3)),{timer:e.timer,canGet:e.canGet,waitTime:e.waitTime}}}}]);